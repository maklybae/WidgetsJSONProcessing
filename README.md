# WidgetsJSONProcessing (КДЗ_3_2 - Вариант 4)

## Преамбула

Согласно требованиям условия:

> 11. Поскольку в описаниях классов присутствует «простор» для принятия решений, то каждое такое решение должно быть описано в комментариях к коду программы. Например, если выбран тип исключения, то должно быть **письменно обоснованно, почему вы считаете его наиболее подходящим в рамках данной задачи**.

> 5. исходный код должен содержать комментарии, объясняющие неочевидные фрагменты и решения, **резюме кода, описание целей кода** (см. материалы лекции 1, модуль 1);

Считаю, что было бы некорректным делать огромные блоки текста, обосновывающие те либо иные пути решения проблемы, поэтому краткое описание будет в этом README файле.

## Архитектура решения

В рамках работы над проектом были учтены лучшие практики построения подобных решений. В качестве референсной архитектуры был выбран подход [Model-View-Controller](https://www.ibm.com/docs/en/radfws/9.6.1?topic=cycle-model-view-controller-architecture).

Смысл в том, чтобы отделить [хранение данных](Model/Database.cs) от интерфейса взаимодейсвия с пользователем, лишь посылать запросы в обработчик [RequestProcessor](Model/RequestProcessor.cs).

![Architecture](readme-assets/architecture.jpg)

## Реализация основных классов и Event Pattern

Учитывая, что [`AutoSaver`](WidgetsJSON/AutoSaverEvent/AutoSaver.cs) (подписчик события `Updated`) должен делать аварийное созранение даже при изменении Спецификаций и, было решено создать родительский класс [`JSONDataType`](WidgetsJSON/JSONDataType.cs), который содержит в себе общее для обоих классов событие и метод `ToJSON()`

[`AutoSaver`](WidgetsJSON/AutoSaverEvent/AutoSaver.cs) хранит время последнего внесенного изменения, а наследник `EventArgs` [`UpdataedEventArgs`](WidgetsJSON/AutoSaverEvent/UpdatedEventArgs.cs) передает новое время изменения.

Еще одно событие `PriceChanged` реагирует на изменение цены Виджета. Подписчик этого события [`PriceRedistributor`](WidgetsJSON/PriceChangedEvent/PriceRedistributor.cs) "подгонняет цену" Спецификаций, чтобы она соответствовала цене Виджета.

![Class Diagram](readme-assets/uml-task-response.png)

##